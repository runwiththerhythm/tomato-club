<header class="navbar bg-base-200 border-b border-base-300">
  <div class="flex-1">
    <a href="{% url 'club:home' %}" class="btn btn-ghost normal-case text-xl font-bold">
      üçÖ Heritage Tomato Club
    </a>
  </div>

  <!-- Desktop nav -->
  <nav class="hidden md:flex gap-2 items-center">
    <a href="{% url 'seeds:variety_list' %}" class="btn btn-ghost btn-sm">Seed Library</a>
    <a href="{% url 'club:resources' %}" class="btn btn-ghost btn-sm">
  Resources
</a>
    <a href="{% url 'club:about' %}" class="btn btn-ghost btn-sm">About</a>
    <a href="{% url 'club:membership' %}" class="btn btn-ghost btn-sm">Membership</a>
    <a href="{% url 'club:join' %}" class="btn btn-ghost btn-sm">Join</a>
    <a href="{% url 'club:contact' %}" class="btn btn-ghost btn-sm">Contact</a>

    {% if user.is_authenticated %}
      <a href="{% url 'profiles:profile-detail' %}" class="btn btn-ghost btn-sm">
        My profile
      </a>
      <a href="#" class="btn btn-ghost btn-sm" aria-disabled="true">
        Dashboard <span class="text-xs opacity-60">(coming soon)</span>
      </a> {# TODO: wire dashboard URL later #}
      <a href="{% url 'account_logout' %}" class="btn btn-error btn-sm">
        Log out
      </a>
    {% else %}
      <a href="{% url 'account_login' %}" class="btn btn-ghost btn-sm">
        Log in
      </a>
      <a href="{% url 'account_signup' %}" class="btn btn-primary btn-sm">
        Join the club
      </a>
    {% endif %}

    {% if user.is_authenticated %}
  <!-- Profile Link with Avatar -->
<a href="{% url 'profiles:profile-detail' %}" class="btn btn-ghost btn-sm p-1">
    {% if user.profile.avatar %}
      <img 
        src="{{ user.profile.avatar.url }}"
        alt="Your profile picture"
        class="w-8 h-8 rounded-full object-cover ring-2 ring-base-300"
      />
    {% else %}
      <div class="w-8 h-8 rounded-full bg-base-300 grid place-items-center">
        <!-- Heroicon: User -->
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-60" fill="none"
             viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8"
                d="M15.75 7.5a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 20.25a8.25 8.25 0 1115 0v.75H4.5v-.75z" />
        </svg>
      </div>
    {% endif %}
  </a>
{% else %}
  <a href="{% url 'account_login' %}" class="btn btn-ghost btn-sm">Login</a>
{% endif %}

  </nav>

  <!-- Mobile nav -->
  <div class="md:hidden">
    <div class="dropdown dropdown-end">
      <label tabindex="0" class="btn btn-ghost btn-square">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
             fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </label>

      <ul tabindex="0"
          class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
        <li><a href="{% url 'club:home' %}">Home</a></li>
        <li><a href="{% url 'club:about' %}">About</a></li>
        <li><a href="{% url 'club:membership' %}">Membership</a></li>
        <li><a href="{% url 'club:join' %}">Join</a></li>
        <li><a href="{% url 'club:contact' %}">Contact</a></li>

        {% if user.is_authenticated %}
          <li>
            <a href="{% url 'profiles:profile-detail' %}">
              My profile
            </a>
          </li>
          <li>
            <a href="#" aria-disabled="true">
              Dashboard <span class="text-xs opacity-60">(coming soon)</span>
            </a> {# TODO: wire dashboard URL later #}
          </li>
          <li>
            <a href="{% url 'account_logout' %}">
              Log out
            </a>
          </li>
        {% else %}
          <li><a href="{% url 'account_login' %}">Log in</a></li>
          <li><a href="{% url 'account_signup' %}">Join the club</a></li>
        {% endif %}
      </ul>
    </div>
    {% if user.is_authenticated %}
<a href="{% url 'profiles:profile-detail' %}" class="btn btn-ghost btn-sm p-1">
    {% if user.profile.avatar %}
      <img src="{{ user.profile.avatar.url }}" class="w-8 h-8 rounded-full" />
    {% else %}
      <div class="w-8 h-8 rounded-full bg-base-300 grid place-items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 opacity-60" fill="none"
             viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.8"
                d="M15.75 7.5a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 20.25a8.25 8.25 0 1115 0v.75H4.5v-.75z" />
        </svg>
      </div>
    {% endif %}
    <span>Your Profile</span>
  </a>
{% else %}
  <a href="{% url 'account_login' %}" class="p-2">Login</a>
{% endif %}

  </div>
</header>
