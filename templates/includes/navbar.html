<header class="navbar bg-base-200 border-b border-base-300">
  <div class="flex-1">
    <a href="{% url 'club:home' %}" class="btn btn-ghost normal-case text-xl font-bold">
      üçÖ Heritage Tomato Club
    </a>
  </div>

  <!-- Desktop nav -->
  <nav class="hidden md:flex gap-2 items-center">
    <a href="{% url 'seeds:variety_list' %}" class="btn btn-ghost btn-sm">
      Seed Library
    </a>
    <a href="{% url 'club:resources' %}" class="btn btn-ghost btn-sm">
      Resources
    </a>
    <a href="{% url 'club:about' %}" class="btn btn-ghost btn-sm">
      About
    </a>
    <a href="{% url 'club:membership' %}" class="btn btn-ghost btn-sm">
      Membership
    </a>
    <a href="{% url 'club:join' %}" class="btn btn-ghost btn-sm">
      Join
    </a>
    <a href="{% url 'club:contact' %}" class="btn btn-ghost btn-sm">
      Contact
    </a>

    {% if user.is_authenticated %}
      <!-- Avatar dropdown for logged-in users -->
      <div class="dropdown dropdown-end">
        <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar">
          <div class="w-9 rounded-full">
            {% if user.profile.avatar %}
              <img
                src="{{ user.profile.avatar.url }}"
                alt="Profile picture of {{ user.profile.display_name|default:user.username }}"
                class="object-cover w-full h-full"
              >
            {% else %}
              <div class="w-9 h-9 rounded-full bg-base-300 grid place-items-center">
                <!-- Head & shoulders icon fallback -->
                <svg xmlns="http://www.w3.org/2000/svg"
                     class="h-5 w-5 opacity-70"
                     viewBox="0 0 24 24"
                     fill="none"
                     stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.7"
                        d="M15.75 7.5a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.5 20.25a8.25 8.25 0 1115 0v.75H4.5v-.75z" />
                </svg>
              </div>
            {% endif %}
          </div>
        </div>

        <ul tabindex="0"
            class="mt-3 z-[1] p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-56">
          <li class="px-2 pb-2 border-b border-base-200 mb-1">
            <p class="text-xs uppercase tracking-wide text-base-content/60">
              Signed in as
            </p>
            <p class="font-semibold text-sm truncate">
              {{ user.profile.display_name|default:user.username }}
            </p>
          </li>

          <li>
            <a href="{% url 'profiles:profile-detail' %}">
              My profile
            </a>
          </li>
          <li>
            <a href="#" aria-disabled="true">
              Dashboard <span class="text-xs opacity-60">(coming soon)</span>
            </a>
          </li>
          <li>
            <a href="{% url 'account_change_password' %}">
              Change password
            </a>
          </li>
          <li>
            <a href="{% url 'account_logout' %}">
              Log out
            </a>
          </li>
        </ul>
      </div>
    {% else %}
      <!-- Guest: show login / sign-up buttons -->
      <a href="{% url 'account_login' %}" class="btn btn-ghost btn-sm">
        Log in
      </a>
      <a href="{% url 'account_signup' %}" class="btn btn-primary btn-sm">
        Join the club
      </a>
    {% endif %}
  </nav>

  <!-- Mobile nav -->
  <div class="md:hidden flex items-center gap-2">
    <div class="dropdown dropdown-end">
      <label tabindex="0" class="btn btn-ghost btn-square">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
             fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M4 6h16M4 12h16M4 18h16" />
        </svg>
      </label>

      <ul tabindex="0"
          class="menu menu-sm dropdown-content mt-3 z-[1] p-2 shadow bg-base-100 rounded-box w-52">
        <li><a href="{% url 'club:home' %}">Home</a></li>
        <li><a href="{% url 'seeds:variety_list' %}">Seed Library</a></li>
        <li><a href="{% url 'club:resources' %}">Resources</a></li>
        <li><a href="{% url 'club:about' %}">About</a></li>
        <li><a href="{% url 'club:membership' %}">Membership</a></li>
        <li><a href="{% url 'club:join' %}">Join</a></li>
        <li><a href="{% url 'club:contact' %}">Contact</a></li>

        {% if user.is_authenticated %}
          <li>
            <a href="{% url 'profiles:profile-detail' %}">
              My profile
            </a>
          </li>
          <li>
            <a href="#" aria-disabled="true">
              Dashboard <span class="text-xs opacity-60">(coming soon)</span>
            </a>
          </li>
          <li>
            <a href="{% url 'account_logout' %}">
              Log out
            </a>
          </li>
        {% else %}
          <li><a href="{% url 'account_login' %}">Log in</a></li>
          <li><a href="{% url 'account_signup' %}">Join the club</a></li>
        {% endif %}
      </ul>
    </div>
  </div>
</header>
