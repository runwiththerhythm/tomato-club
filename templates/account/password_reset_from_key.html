{% extends "base.html" %}
{% load i18n %}

{% block title %}Choose a new password â€“ Heritage Tomato Club{% endblock title %}

{% block content %}
<main class="max-w-md mx-auto px-4 py-10">
  <section class="card bg-base-100 shadow-md border border-base-300/70">
    <div class="card-body space-y-4">
      <h1 class="card-title text-2xl">
        {% trans "Choose a new password" %}
      </h1>

      {% if token_fail %}
        <p class="text-sm text-error">
          {% trans "The password reset link is invalid or has expired." %}
        </p>
        <a href="{% url 'account_reset_password' %}" class="btn btn-primary mt-2">
          {% trans "Request a new reset link" %}
        </a>
      {% else %}
        <form method="post" action="." class="space-y-4">
          {% csrf_token %}
          {{ form.non_field_errors }}

          {# Password 1 #}
          <div class="form-control">
            <label class="label" for="{{ form.password1.id_for_label }}">
              <span class="label-text font-medium">
                {% trans "New password" %}
                {% if form.password1.field.required %}<span class="text-error">*</span>{% endif %}
              </span>
            </label>
            <input
              type="password"
              id="{{ form.password1.id_for_label }}"
              name="{{ form.password1.html_name }}"
              class="input input-bordered w-full"
              autocomplete="new-password"
            />
            {% for error in form.password1.errors %}
              <p class="text-error text-sm mt-1">{{ error }}</p>
            {% endfor %}
          </div>

          {# Password 2 #}
          <div class="form-control">
            <label class="label" for="{{ form.password2.id_for_label }}">
              <span class="label-text font-medium">
                {% trans "Confirm new password" %}
                {% if form.password2.field.required %}<span class="text-error">*</span>{% endif %}
              </span>
            </label>
            <input
              type="password"
              id="{{ form.password2.id_for_label }}"
              name="{{ form.password2.html_name }}"
              class="input input-bordered w-full"
              autocomplete="new-password"
            />
            {% for error in form.password2.errors %}
              <p class="text-error text-sm mt-1">{{ error }}</p>
            {% endfor %}
          </div>

          <div class="form-control mt-4">
            <button type="submit" class="btn btn-primary w-full">
              {% trans "Set new password" %}
            </button>
          </div>
        </form>
      {% endif %}
    </div>
  </section>
</main>
{% endblock content %}
